<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weekend League</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      /* New UI Polish */
      .big-btn {
        display: block;
        padding: 20px;
        font-size: 18px;
        font-weight: bold;
        text-align: center;
        background: #1e293b;
        border: 1px solid #334155;
        border-radius: 12px;
        margin-bottom: 15px;
        cursor: pointer;
        color: white;
      }
      .big-btn:active {
        transform: scale(0.98);
        background: #334155;
      }

      .tab-btn {
        flex: 1;
        padding: 12px;
        background: #0f172a;
        border: 1px solid #334155;
        color: #94a3b8;
        font-weight: 600;
        cursor: pointer;
        text-align: center;
      }
      .tab-btn.active {
        background: #3b82f6;
        color: white;
        border-color: #3b82f6;
      }

      .match-row {
        display: flex;
        align-items: center;
        background: #1e293b;
        margin-bottom: 8px;
        border-radius: 8px;
        padding: 10px;
        border: 1px solid #334155;
      }
      .match-finished {
        border-left: 5px solid #22c55e;
      } /* Green Highlight */

      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
      }
      th {
        text-align: left;
        color: #94a3b8;
        padding: 5px;
        border-bottom: 1px solid #334155;
      }
      td {
        padding: 8px 5px;
        border-bottom: 1px solid #1e293b;
      }

      .control-icon {
        padding: 5px;
        cursor: pointer;
        color: #94a3b8;
        font-size: 16px;
      }
      .control-icon:hover {
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <div class="top-bar">
        <h2 style="margin: 0">‚öΩ Weekend League</h2>
        <div id="auth-ui">
          <span id="loginBtn" onclick="toggleLogin()" class="login-icon"
            >üîí</span
          >
          <span
            id="logoutBtn"
            onclick="logout()"
            class="hidden login-icon"
            style="color: #ef4444"
            >üö™</span
          >
        </div>
      </div>

      <div
        id="login-modal"
        class="hidden"
        style="
          background: #1e293b;
          padding: 15px;
          position: absolute;
          top: 60px;
          right: 20px;
          border-radius: 8px;
          border: 1px solid #475569;
          z-index: 50;
        "
      >
        <input id="uName" placeholder="Username" style="margin-top: 0" />
        <input id="pWord" type="password" placeholder="Password" />
        <button class="btn-primary" onclick="login()" style="padding: 8px">
          Login
        </button>
      </div>

      <div id="dashboard-view">
        <div id="players-manager" class="hidden">
          <button
            onclick="togglePlayerMgr()"
            style="
              background: transparent;
              color: #94a3b8;
              padding: 0;
              margin-bottom: 10px;
            "
          >
            ‚Üê Back
          </button>
          <h3>üë• Manage Players</h3>
          <div class="flex-between">
            <input id="newGlobalPlayer" placeholder="New Player Name" />
            <button
              class="btn-admin"
              onclick="createGlobalPlayer()"
              style="width: auto; margin-left: 10px"
            >
              Add
            </button>
          </div>
          <div
            id="all-players-list"
            style="margin-top: 10px; color: #cbd5e1"
          ></div>
        </div>

        <div id="main-menu">
          <div class="big-btn" onclick="showTournaments()">üèÜ Tournaments</div>
          <div class="big-btn" onclick="togglePlayerMgr()">
            üë• All Players List
          </div>
        </div>

        <div id="tournaments-section" class="hidden">
          <button
            onclick="showMainMenu()"
            style="
              background: transparent;
              color: #94a3b8;
              padding: 0;
              margin-bottom: 10px;
            "
          >
            ‚Üê Back
          </button>
          <div class="flex-between">
            <h3>Tournaments</h3>
            <button
              id="createTournBtn"
              class="btn-admin hidden"
              onclick="openCreateTournModal()"
              style="width: auto"
            >
              + New
            </button>
          </div>
          <div id="tournament-list"></div>
        </div>
      </div>

      <div id="tournament-view" class="hidden">
        <button
          onclick="closeTournament()"
          style="
            background: transparent;
            color: #94a3b8;
            padding: 0;
            margin-bottom: 10px;
          "
        >
          ‚Üê Back to List
        </button>
        <h2 id="active-tourn-title" style="color: #22c55e; margin-top: 0"></h2>

        <div style="display: flex; margin-bottom: 15px">
          <div
            class="tab-btn active"
            onclick="switchTab('standings')"
            id="btn-standings"
          >
            üìä Table
          </div>
          <div
            class="tab-btn"
            onclick="switchTab('fixtures')"
            id="btn-fixtures"
          >
            üìÖ Matches
          </div>
          <div class="tab-btn" onclick="switchTab('teams')" id="btn-teams">
            üõ°Ô∏è Teams
          </div>
        </div>

        <div id="tab-standings">
          <div class="card">
            <table id="league-table">
              <thead>
                <tr>
                  <th>Pos</th>
                  <th>Team</th>
                  <th>P</th>
                  <th>W</th>
                  <th>D</th>
                  <th>L</th>
                  <th>GD</th>
                  <th>Pts</th>
                </tr>
              </thead>
              <tbody id="league-body"></tbody>
            </table>
          </div>
        </div>

        <div id="tab-fixtures" class="hidden">
          <div id="admin-fixtures-controls" class="hidden box-admin">
            <div class="flex-between">
              <input
                id="genRounds"
                type="number"
                value="1"
                placeholder="Rounds"
                style="width: 60px; margin: 0"
              />
              <button
                id="btnGen"
                class="btn-primary"
                onclick="generateFixtures()"
                style="margin: 0 10px"
              >
                üé≤ Auto-Generate
              </button>
              <button
                class="btn-secondary"
                onclick="clearFixtures()"
                style="background: #ef4444; width: auto"
              >
                üóëÔ∏è Clear
              </button>
            </div>
            <div
              style="
                text-align: center;
                font-size: 11px;
                color: #94a3b8;
                margin-top: 5px;
              "
            >
              Enter rounds (1 = Single leg, 2 = Home/Away)
            </div>

            <hr style="border-color: #475569; margin: 10px 0" />

            <details>
              <summary style="cursor: pointer; font-size: 12px; color: #cbd5e1">
                + Add Single Match (Finals/Custom)
              </summary>
              <select id="teamASelect">
                <option>Team A</option>
              </select>
              <select id="teamBSelect">
                <option>Team B</option>
              </select>
              <input type="datetime-local" id="matchDate" />
              <button class="btn-secondary" onclick="scheduleMatch()">
                Add
              </button>
            </details>
          </div>

          <div id="matches-list"></div>
        </div>

        <div id="tab-teams" class="hidden">
          <div id="admin-teams-controls" class="hidden box-admin">
            <h4>Add Team</h4>
            <input id="newTeamName" placeholder="Team Name" />
            <input
              id="newTeamColor"
              type="color"
              value="#ffffff"
              style="height: 40px"
            />
            <button class="btn-admin" onclick="addTeam()">+ Add Team</button>
          </div>
          <div id="teams-list"></div>
        </div>
      </div>

      <div id="create-tourn-modal" class="hidden modal">
        <div class="modal-close" onclick="closeCreateTournModal()">√ó</div>
        <div
          style="
            background: #1e293b;
            padding: 20px;
            border-radius: 12px;
            margin-top: 100px;
            border: 1px solid #334155;
          "
        >
          <h3>New Tournament</h3>
          <input id="newTournName" placeholder="Tournament Name" />
          <div class="flex-between">
            <div style="width: 48%">
              <label>Start</label><input id="newStartDate" type="date" />
            </div>
            <div style="width: 48%">
              <label>End</label><input id="newEndDate" type="date" />
            </div>
          </div>
          <button class="btn-primary" onclick="createTournament()">
            Create
          </button>
        </div>
      </div>

      <div id="match-modal" class="hidden modal">
        <div class="modal-close" onclick="closeMatchModal()">√ó</div>
        <div
          id="match-modal-content"
          style="background: #1e293b; min-height: 100vh; padding: 20px"
        ></div>
      </div>

      <pre id="output"></pre>
    </div>
    <script src="app.js"></script>
  </body>
</html>
